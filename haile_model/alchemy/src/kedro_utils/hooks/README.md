# Hooks

## What are (Kedro) Hooks?
Hooks provide a mechanism to cleanly inject behavior and code into Kedro's execution mechanism. For example, we can include a debugging hook that automatically enters a `pdb` post-mortem debugging session if the pipeline encounters an uncaught exception. 

For more details, read the [Kedro documentation about Hooks](https://kedro.readthedocs.io/en/stable/07_extend_kedro/02_hooks.html).

## How to use Kedro Hooks
Hooks can be registered in configuration, by updating the `.kedro.yml` file if it exists, in the pyproject.toml file under the [tool.kedro], or in code by modifying the definition of the `ProjectContext`. For most up to date details please refer to the [Kedro documentation](https://kedro.readthedocs.io/en/stable/07_extend_kedro/02_hooks.html).

Many of the Hooks which ship by default with Optimus follow the latter approach. Hooks are added to the definition of the `ProjectContext` that is found in `pipeline/src/run.py`.

## How to create new Hooks
You can create new Hooks that implement additional desired behavior. You should implement the full specification for the Hook, which will act at the desired point in time or execution. 

## Custom Hooks included in Optimus

* `kedro_utils.hooks.pyplot`: The hooks specified here are used to control and set global environment variables related to plotting. Specifically, they are used to control `matplotlib` themes, and update the catalog attribute of `matplotlib` figure attributes.

* `kedro_utils.hooks.qa_logging`: These hooks are an Optimus-specific specification of logging with `mlflow`. The hooks implement logic for logging and capturing model artifacts during the model building and training process. Specifically, this hook logs:

     * __All__ `matplotlib` figures generated by the pipeline
     * Model objects
     * Model performance metrics (e.g. mean-absolute error, R2)
     * The version of the `TagDictionary` used for that run.
